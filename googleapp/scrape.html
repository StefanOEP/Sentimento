{% autoescape true %}
<!DOCTYPE html>
<html>
	<head>
		<style>
		body
		{
			background-color:white;
			text-color
		}

		.boxes {
			background-color: White;
			float: left;
			width: 20%;
			height: 230px;
			border-width:1px;
			border-style:solid;
			border-color:#000000;
		}
		input.go
		{
			height: 50px;
			width: 100px;
		}

		</style>
		<title>Sentimento - By Jannik, Stefan and Lars</title>
		<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">
		<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
		<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
		<script type="text/javascript">

			$(function() {
			    $( "#startdatepicker" ).datepicker({ dateFormat: 'dd-mm-yy' });
			    $( "#enddatepicker" ).datepicker({ dateFormat: 'dd-mm-yy' });
			  });

			function redirect() {
				var topic = $("#topic").val();
				
				var selected = new Array();
				$('#checkboxes input:checked').each(function() {
				    selected.push($(this).attr('name'));
				});

				//Make sure that some input has been selected.
				if(topic === undefined || topic.length === 0 || selected.length === 0){
					alert("Please input more data");
				}
				else{
					dates = ""
					var startdate = $("#startdatepicker").val();
					var enddate =  $( "#enddatepicker").val();
					if(startdate != null && enddate != null){
						dates = "&Startdate=" + startdate + "&Enddate=" + enddate;
					}

					window.location.replace("/result?Topic=" + topic + "&" + "Sources=" + selected + dates);	
				}
			}
		</script>
	</head>
	<body>
		<form action="javascript:redirect()" method="get">
			<div class="boxes">
				<h1>Step 1</h1>
				<p>Enter a topic: <input id="topic" type="text" name="Topic"> </p>
			</div>
			<div id="checkboxes" class="boxes">
				<h1>Step 2</h1>
				<p>Select which sites to search:</p>
					{% for site in site_list %}
	                 <input type="checkbox" name="{{ site.id }}"> {{ site.display }}<br/>
	                {% endfor %}
			</div>
			<div class="boxes"> 
				<h1>Step 3</h1>
				 Start date: <input type="text" id="startdatepicker"> <br />
				 End date: <input type="text" id="enddatepicker">
			</div>
			<div class="boxes">
				<h1>Step 4</h1>
				<p><input type="submit" value="Submit" class="go"></p>
			</div>
		</form>
	</body>
</html>
{% endautoescape %}